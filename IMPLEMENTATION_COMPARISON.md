# Dice Roller Implementation Comparison - Statistical Fairness (High-Volume Testing)

This document compares the statistical fairness of two dice rolling
implementations with an extremely large sample size:

1. `Math.random()` - JavaScript's built-in pseudo-random number generator
2. `Roller` - Our custom implementation using cryptographically secure random
   values

## Test Methodology

Each die type was rolled a very large number of times with both implementations
to ensure high statistical significance. This high-volume testing (using
millions of total dice rolls) allows us to detect even small deviations from the
ideal distribution.

| Die Type | Number of Rolls | Expected Occurrences Per Value |
| -------- | --------------- | ------------------------------ |
| d4       | 400,000         | 100,000                        |
| d6       | 600,000         | 100,000                        |
| d8       | 800,000         | 100,000                        |
| d10      | 1,000,000       | 100,000                        |
| d12      | 1,200,000       | 100,000                        |
| d20      | 2,000,000       | 100,000                        |

We measured the distribution of each possible value and calculated the
chi-square test values to measure goodness of fit against an ideal distribution.
Lower chi-square values indicate a distribution closer to the ideal.

With such large sample sizes, we can draw more definitive conclusions about the
statistical fairness of each implementation.

## Distribution Results

### D4 Distribution

#### Chi-Square Comparison

| Implementation | Chi-Square Value |
| -------------- | ---------------- |
| Math.random()  | 4.69             |
| Roller         | 4.20             |

#### Math.random() Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,226 | 25.06%     | 25.00%     | +0.06%    |
| 2     | 100,401 | 25.10%     | 25.00%     | +0.10%    |
| 3     | 99,513  | 24.88%     | 25.00%     | -0.12%    |
| 4     | 99,860  | 24.96%     | 25.00%     | -0.04%    |

```
 1: ██████████████████████████████████████████████████ 100226
 2: ██████████████████████████████████████████████████ 100401
 3: ██████████████████████████████████████████████████ 99513
 4: ██████████████████████████████████████████████████ 99860
```

#### Roller Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 99,833  | 24.96%     | 25.00%     | -0.04%    |
| 2     | 99,644  | 24.91%     | 25.00%     | -0.09%    |
| 3     | 100,515 | 25.13%     | 25.00%     | +0.13%    |
| 4     | 100,008 | 25.00%     | 25.00%     | +0.00%    |

```
 1: ██████████████████████████████████████████████████ 99833
 2: ██████████████████████████████████████████████████ 99644
 3: ██████████████████████████████████████████████████ 100515
 4: ██████████████████████████████████████████████████ 100008
```

### D6 Distribution

#### Chi-Square Comparison

| Implementation | Chi-Square Value |
| -------------- | ---------------- |
| Math.random()  | 1.50             |
| Roller         | 4.01             |

#### Math.random() Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 99,979  | 16.66%     | 16.67%     | -0.00%    |
| 2     | 100,121 | 16.69%     | 16.67%     | +0.02%    |
| 3     | 100,105 | 16.68%     | 16.67%     | +0.02%    |
| 4     | 99,732  | 16.62%     | 16.67%     | -0.04%    |
| 5     | 99,873  | 16.65%     | 16.67%     | -0.02%    |
| 6     | 100,190 | 16.70%     | 16.67%     | +0.03%    |

```
 1: ██████████████████████████████████████████████████ 99979
 2: ██████████████████████████████████████████████████ 100121
 3: ██████████████████████████████████████████████████ 100105
 4: ██████████████████████████████████████████████████ 99732
 5: ██████████████████████████████████████████████████ 99873
 6: ██████████████████████████████████████████████████ 100190
```

#### Roller Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 99,536  | 16.59%     | 16.67%     | -0.08%    |
| 2     | 99,991  | 16.67%     | 16.67%     | -0.00%    |
| 3     | 100,310 | 16.72%     | 16.67%     | +0.05%    |
| 4     | 100,231 | 16.71%     | 16.67%     | +0.04%    |
| 5     | 99,836  | 16.64%     | 16.67%     | -0.03%    |
| 6     | 100,096 | 16.68%     | 16.67%     | +0.02%    |

```
 1: ██████████████████████████████████████████████████ 99536
 2: ██████████████████████████████████████████████████ 99991
 3: ██████████████████████████████████████████████████ 100310
 4: ██████████████████████████████████████████████████ 100231
 5: ██████████████████████████████████████████████████ 99836
 6: ██████████████████████████████████████████████████ 100096
```

### D8 Distribution

#### Chi-Square Comparison

| Implementation | Chi-Square Value |
| -------------- | ---------------- |
| Math.random()  | 5.94             |
| Roller         | 5.82             |

#### Math.random() Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 99,821  | 12.48%     | 12.50%     | -0.02%    |
| 2     | 100,054 | 12.51%     | 12.50%     | +0.01%    |
| 3     | 100,052 | 12.51%     | 12.50%     | +0.01%    |
| 4     | 100,463 | 12.56%     | 12.50%     | +0.06%    |
| 5     | 99,986  | 12.50%     | 12.50%     | -0.00%    |
| 6     | 99,480  | 12.44%     | 12.50%     | -0.06%    |
| 7     | 100,247 | 12.53%     | 12.50%     | +0.03%    |
| 8     | 99,897  | 12.49%     | 12.50%     | -0.01%    |

```
 1: ██████████████████████████████████████████████████ 99821
 2: ██████████████████████████████████████████████████ 100054
 3: ██████████████████████████████████████████████████ 100052
 4: ██████████████████████████████████████████████████ 100463
 5: ██████████████████████████████████████████████████ 99986
 6: ██████████████████████████████████████████████████ 99480
 7: ██████████████████████████████████████████████████ 100247
 8: ██████████████████████████████████████████████████ 99897
```

#### Roller Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,292 | 12.54%     | 12.50%     | +0.04%    |
| 2     | 99,745  | 12.47%     | 12.50%     | -0.03%    |
| 3     | 99,932  | 12.49%     | 12.50%     | -0.01%    |
| 4     | 99,608  | 12.45%     | 12.50%     | -0.05%    |
| 5     | 99,950  | 12.49%     | 12.50%     | -0.01%    |
| 6     | 100,419 | 12.55%     | 12.50%     | +0.05%    |
| 7     | 100,244 | 12.53%     | 12.50%     | +0.03%    |
| 8     | 99,810  | 12.48%     | 12.50%     | -0.02%    |

```
 1: ██████████████████████████████████████████████████ 100292
 2: ██████████████████████████████████████████████████ 99745
 3: ██████████████████████████████████████████████████ 99932
 4: ██████████████████████████████████████████████████ 99608
 5: ██████████████████████████████████████████████████ 99950
 6: ██████████████████████████████████████████████████ 100419
 7: ██████████████████████████████████████████████████ 100244
 8: ██████████████████████████████████████████████████ 99810
```

### D10 Distribution

#### Chi-Square Comparison

| Implementation | Chi-Square Value |
| -------------- | ---------------- |
| Math.random()  | 16.38            |
| Roller         | 14.80            |

#### Math.random() Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,858 | 10.09%     | 10.00%     | +0.09%    |
| 2     | 100,129 | 10.01%     | 10.00%     | +0.01%    |
| 3     | 99,617  | 9.96%      | 10.00%     | -0.04%    |
| 4     | 100,411 | 10.04%     | 10.00%     | +0.04%    |
| 5     | 99,849  | 9.98%      | 10.00%     | -0.02%    |
| 6     | 99,771  | 9.98%      | 10.00%     | -0.02%    |
| 7     | 100,370 | 10.04%     | 10.00%     | +0.04%    |
| 8     | 99,547  | 9.95%      | 10.00%     | -0.05%    |
| 9     | 99,722  | 9.97%      | 10.00%     | -0.03%    |
| 10    | 99,726  | 9.97%      | 10.00%     | -0.03%    |

```
 1: ██████████████████████████████████████████████████ 100858
 2: ██████████████████████████████████████████████████ 100129
 3: █████████████████████████████████████████████████ 99617
 4: ██████████████████████████████████████████████████ 100411
 5: █████████████████████████████████████████████████ 99849
 6: █████████████████████████████████████████████████ 99771
 7: ██████████████████████████████████████████████████ 100370
 8: █████████████████████████████████████████████████ 99547
 9: █████████████████████████████████████████████████ 99722
10: █████████████████████████████████████████████████ 99726
```

#### Roller Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,439 | 10.04%     | 10.00%     | +0.04%    |
| 2     | 100,484 | 10.05%     | 10.00%     | +0.05%    |
| 3     | 100,147 | 10.01%     | 10.00%     | +0.01%    |
| 4     | 99,681  | 9.97%      | 10.00%     | -0.03%    |
| 5     | 99,534  | 9.95%      | 10.00%     | -0.05%    |
| 6     | 99,587  | 9.96%      | 10.00%     | -0.04%    |
| 7     | 100,543 | 10.05%     | 10.00%     | +0.05%    |
| 8     | 99,560  | 9.96%      | 10.00%     | -0.04%    |
| 9     | 100,176 | 10.02%     | 10.00%     | +0.02%    |
| 10    | 99,849  | 9.98%      | 10.00%     | -0.02%    |

```
 1: ██████████████████████████████████████████████████ 100439
 2: ██████████████████████████████████████████████████ 100484
 3: ██████████████████████████████████████████████████ 100147
 4: ██████████████████████████████████████████████████ 99681
 5: █████████████████████████████████████████████████ 99534
 6: ██████████████████████████████████████████████████ 99587
 7: ██████████████████████████████████████████████████ 100543
 8: ██████████████████████████████████████████████████ 99560
 9: ██████████████████████████████████████████████████ 100176
10: ██████████████████████████████████████████████████ 99849
```

### D12 Distribution

#### Chi-Square Comparison

| Implementation | Chi-Square Value |
| -------------- | ---------------- |
| Math.random()  | 9.30             |
| Roller         | 14.66            |

#### Math.random() Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,446 | 8.37%      | 8.33%      | +0.04%    |
| 2     | 99,646  | 8.30%      | 8.33%      | -0.03%    |
| 3     | 99,989  | 8.33%      | 8.33%      | -0.00%    |
| 4     | 100,330 | 8.36%      | 8.33%      | +0.03%    |
| 5     | 99,637  | 8.30%      | 8.33%      | -0.03%    |
| 6     | 100,177 | 8.35%      | 8.33%      | +0.01%    |
| 7     | 99,992  | 8.33%      | 8.33%      | -0.00%    |
| 8     | 100,052 | 8.34%      | 8.33%      | +0.00%    |
| 9     | 100,096 | 8.34%      | 8.33%      | +0.01%    |
| 10    | 99,489  | 8.29%      | 8.33%      | -0.04%    |
| 11    | 99,915  | 8.33%      | 8.33%      | -0.01%    |
| 12    | 100,231 | 8.35%      | 8.33%      | +0.02%    |

```
 1: ██████████████████████████████████████████████████ 100446
 2: ██████████████████████████████████████████████████ 99646
 3: ██████████████████████████████████████████████████ 99989
 4: ██████████████████████████████████████████████████ 100330
 5: ██████████████████████████████████████████████████ 99637
 6: ██████████████████████████████████████████████████ 100177
 7: ██████████████████████████████████████████████████ 99992
 8: ██████████████████████████████████████████████████ 100052
 9: ██████████████████████████████████████████████████ 100096
10: ██████████████████████████████████████████████████ 99489
11: ██████████████████████████████████████████████████ 99915
12: ██████████████████████████████████████████████████ 100231
```

#### Roller Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,094 | 8.34%      | 8.33%      | +0.01%    |
| 2     | 99,565  | 8.30%      | 8.33%      | -0.04%    |
| 3     | 100,402 | 8.37%      | 8.33%      | +0.03%    |
| 4     | 99,850  | 8.32%      | 8.33%      | -0.01%    |
| 5     | 99,503  | 8.29%      | 8.33%      | -0.04%    |
| 6     | 100,240 | 8.35%      | 8.33%      | +0.02%    |
| 7     | 100,438 | 8.37%      | 8.33%      | +0.04%    |
| 8     | 99,630  | 8.30%      | 8.33%      | -0.03%    |
| 9     | 100,028 | 8.34%      | 8.33%      | +0.00%    |
| 10    | 99,672  | 8.31%      | 8.33%      | -0.03%    |
| 11    | 99,993  | 8.33%      | 8.33%      | -0.00%    |
| 12    | 100,585 | 8.38%      | 8.33%      | +0.05%    |

```
 1: ██████████████████████████████████████████████████ 100094
 2: █████████████████████████████████████████████████ 99565
 3: ██████████████████████████████████████████████████ 100402
 4: ██████████████████████████████████████████████████ 99850
 5: █████████████████████████████████████████████████ 99503
 6: ██████████████████████████████████████████████████ 100240
 7: ██████████████████████████████████████████████████ 100438
 8: ██████████████████████████████████████████████████ 99630
 9: ██████████████████████████████████████████████████ 100028
10: ██████████████████████████████████████████████████ 99672
11: ██████████████████████████████████████████████████ 99993
12: ██████████████████████████████████████████████████ 100585
```

### D20 Distribution

#### Chi-Square Comparison

| Implementation | Chi-Square Value |
| -------------- | ---------------- |
| Math.random()  | 19.93            |
| Roller         | 15.94            |

#### Math.random() Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 99,913  | 5.00%      | 5.00%      | -0.00%    |
| 2     | 99,893  | 4.99%      | 5.00%      | -0.01%    |
| 3     | 99,473  | 4.97%      | 5.00%      | -0.03%    |
| 4     | 99,965  | 5.00%      | 5.00%      | -0.00%    |
| 5     | 99,433  | 4.97%      | 5.00%      | -0.03%    |
| 6     | 99,593  | 4.98%      | 5.00%      | -0.02%    |
| 7     | 100,477 | 5.02%      | 5.00%      | +0.02%    |
| 8     | 99,771  | 4.99%      | 5.00%      | -0.01%    |
| 9     | 100,404 | 5.02%      | 5.00%      | +0.02%    |
| 10    | 100,314 | 5.02%      | 5.00%      | +0.02%    |
| 11    | 99,841  | 4.99%      | 5.00%      | -0.01%    |
| 12    | 100,453 | 5.02%      | 5.00%      | +0.02%    |
| 13    | 100,237 | 5.01%      | 5.00%      | +0.01%    |
| 14    | 99,967  | 5.00%      | 5.00%      | -0.00%    |
| 15    | 100,225 | 5.01%      | 5.00%      | +0.01%    |
| 16    | 99,669  | 4.98%      | 5.00%      | -0.02%    |
| 17    | 100,344 | 5.02%      | 5.00%      | +0.02%    |
| 18    | 99,860  | 4.99%      | 5.00%      | -0.01%    |
| 19    | 100,266 | 5.01%      | 5.00%      | +0.01%    |
| 20    | 99,902  | 5.00%      | 5.00%      | -0.00%    |

```
 1: ██████████████████████████████████████████████████ 99913
 2: ██████████████████████████████████████████████████ 99893
 3: ██████████████████████████████████████████████████ 99473
 4: ██████████████████████████████████████████████████ 99965
 5: █████████████████████████████████████████████████ 99433
 6: ██████████████████████████████████████████████████ 99593
 7: ██████████████████████████████████████████████████ 100477
 8: ██████████████████████████████████████████████████ 99771
 9: ██████████████████████████████████████████████████ 100404
10: ██████████████████████████████████████████████████ 100314
11: ██████████████████████████████████████████████████ 99841
12: ██████████████████████████████████████████████████ 100453
13: ██████████████████████████████████████████████████ 100237
14: ██████████████████████████████████████████████████ 99967
15: ██████████████████████████████████████████████████ 100225
16: ██████████████████████████████████████████████████ 99669
17: ██████████████████████████████████████████████████ 100344
18: ██████████████████████████████████████████████████ 99860
19: ██████████████████████████████████████████████████ 100266
20: ██████████████████████████████████████████████████ 99902
```

#### Roller Distribution

| Value | Count   | Percentage | Expected % | Deviation |
| ----- | ------- | ---------- | ---------- | --------- |
| 1     | 100,379 | 5.02%      | 5.00%      | +0.02%    |
| 2     | 100,112 | 5.01%      | 5.00%      | +0.01%    |
| 3     | 100,117 | 5.01%      | 5.00%      | +0.01%    |
| 4     | 99,882  | 4.99%      | 5.00%      | -0.01%    |
| 5     | 99,692  | 4.98%      | 5.00%      | -0.02%    |
| 6     | 99,859  | 4.99%      | 5.00%      | -0.01%    |
| 7     | 99,893  | 4.99%      | 5.00%      | -0.01%    |
| 8     | 100,050 | 5.00%      | 5.00%      | +0.00%    |
| 9     | 100,590 | 5.03%      | 5.00%      | +0.03%    |
| 10    | 100,290 | 5.01%      | 5.00%      | +0.01%    |
| 11    | 99,723  | 4.99%      | 5.00%      | -0.01%    |
| 12    | 99,872  | 4.99%      | 5.00%      | -0.01%    |
| 13    | 99,806  | 4.99%      | 5.00%      | -0.01%    |
| 14    | 100,452 | 5.02%      | 5.00%      | +0.02%    |
| 15    | 100,388 | 5.02%      | 5.00%      | +0.02%    |
| 16    | 99,879  | 4.99%      | 5.00%      | -0.01%    |
| 17    | 99,902  | 5.00%      | 5.00%      | -0.00%    |
| 18    | 99,762  | 4.99%      | 5.00%      | -0.01%    |
| 19    | 99,867  | 4.99%      | 5.00%      | -0.01%    |
| 20    | 99,485  | 4.97%      | 5.00%      | -0.03%    |

```
 1: ██████████████████████████████████████████████████ 100379
 2: ██████████████████████████████████████████████████ 100112
 3: ██████████████████████████████████████████████████ 100117
 4: ██████████████████████████████████████████████████ 99882
 5: ██████████████████████████████████████████████████ 99692
 6: ██████████████████████████████████████████████████ 99859
 7: ██████████████████████████████████████████████████ 99893
 8: ██████████████████████████████████████████████████ 100050
 9: ██████████████████████████████████████████████████ 100590
10: ██████████████████████████████████████████████████ 100290
11: ██████████████████████████████████████████████████ 99723
12: ██████████████████████████████████████████████████ 99872
13: ██████████████████████████████████████████████████ 99806
14: ██████████████████████████████████████████████████ 100452
15: ██████████████████████████████████████████████████ 100388
16: ██████████████████████████████████████████████████ 99879
17: ██████████████████████████████████████████████████ 99902
18: ██████████████████████████████████████████████████ 99762
19: ██████████████████████████████████████████████████ 99867
20: █████████████████████████████████████████████████ 99485
```

## Conclusion

The statistical analysis compares the fairness of two dice rolling
implementations with a high-volume testing approach (millions of total rolls):

1. `Math.random()` - JavaScript's built-in pseudo-random number generator
2. `Roller` - Our custom implementation using cryptographically secure random
   values

The chi-square values tell us how closely each implementation matches the
expected theoretical distribution for fair dice. Lower chi-square values
indicate a distribution closer to the ideal.

| Die Type | Math.random() Chi-Square | Roller Chi-Square | Critical Value (p=0.05) | Result                            |
| -------- | ------------------------ | ----------------- | ----------------------- | --------------------------------- |
| d4       | 4.69                     | 4.20              | 7.81                    | Both fair, Roller slightly better |
| d6       | 1.50                     | 4.01              | 11.07                   | Both fair, Math.random() better   |
| d8       | 5.94                     | 5.82              | 14.07                   | Both fair, nearly identical       |
| d10      | 16.38                    | 14.80             | 16.92                   | Both fair, Roller slightly better |
| d12      | 9.30                     | 14.66             | 19.68                   | Both fair, Math.random() better   |
| d20      | 19.93                    | 15.94             | 30.14                   | Both fair, Roller better          |

The critical values represent the chi-square threshold at a 95% confidence level
(p=0.05). Values below the critical threshold indicate the distribution is
statistically consistent with a fair die.

### Key Findings

1. High-volume testing reveals that both implementations produce statistically
   fair distributions for all common die types
2. With very large sample sizes (millions of rolls), the differences in
   chi-square values between implementations are more meaningful than in smaller
   tests
3. The Roller implementation performed better for d4, d10, and d20 dice
4. The Math.random() implementation performed better for d6 and d12 dice
5. For d8, both implementations were nearly identical in performance
6. All chi-square values remained comfortably below their respective critical
   values, confirming statistical fairness

### Important Insights

1. The most striking result is how both implementations performed with d20
   dice - Roller (15.94) outperformed Math.random() (19.93) by a significant
   margin in this important die type for many tabletop games
2. For d10, Roller's implementation was also notably better than Math.random(),
   with both values approaching (but still under) the critical threshold
3. The Math.random() implementation showed exceptional fairness with d6 dice
   (chi-square of only 1.50)
4. The extremely large sample size (with 100,000 expected occurrences per value)
   provided high confidence in our statistical analysis

These results demonstrate that both implementations provide statistically fair
dice rolling, but with this large-scale testing, we can see that each has slight
advantages with different die types. The Roller implementation appears to have a
slight edge with larger-sided dice (d10, d20), which are particularly important
in many tabletop roleplaying games. This makes Roller a strong choice for TTRPG
applications, especially when combined with its additional features for complex
dice notation, functions, and variables.
